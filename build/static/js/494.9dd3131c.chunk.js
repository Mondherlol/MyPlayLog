"use strict";(self.webpackChunkmyplaylog_frontend_web=self.webpackChunkmyplaylog_frontend_web||[]).push([[494],{9133:function(e,t,n){var s,r,a,i=n(9439),l=n(168),o=n(1087),c=n(2360),d=n(2791),x=(n(7192),n(184)),m="https://images.igdb.com/igdb/image/upload/t_cover_big/nocover.png",u=c.ZP.figure(s||(s=(0,l.Z)(["\n  margin: 7px;\n  width: calc(180px - 2vw);\n  @media (max-width: 768px) {\n    width: calc(180px - 15vw);\n  }\n\n  overflow: hidden;\n  position:relative;\n  box-shadow: 0 5px 10px rgb(0 0 0 / 80%);\n  transform-origin: center top;\n  transform-style: preserve-3d;\n  transform: translateZ(0);\n  transition: 0.3s;\n  &:hover {\n    box-shadow 0 8px 16px 3px rgba( #000, .6 );\n    transform translateY( -3px ) scale( 1.05 );\n\n  }\n  & > img{\n    width:100%;\n    min-height:100%;\n  }\n  &:hover > figcaption{\n    transform:translateY(0px);\n  }\n"]))),f=c.ZP.figcaption(r||(r=(0,l.Z)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  color: white;\n  transition:0.28s;\n  text-shadow: 1px 1px 2px black;\n  padding-bottom 10px;\n\n  margin-left:5px;\n  \n  transform:translateY(200px);\n"]))),h=c.ZP.div(a||(a=(0,l.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  color: white;\n  font-size: 3vh;\n  width: 35px;\n  border: 2px solid white;\n  height: 35px;\n  top: 3px;\n  left: 3px;\n    background-color: rgb(8, 7, 27, 0.7);\n  border-radius: 12px;\n"])));t.Z=function(e){var t=e.game,n=(0,d.useState)(!1),s=(0,i.Z)(n,2),r=s[0],a=s[1];return(0,x.jsx)("div",{className:"relative",children:(0,x.jsx)(o.rU,{to:"/game/".concat(t.slug),draggable:"false",children:(0,x.jsxs)(u,{className:r?"":"loading h-48",children:[(0,x.jsx)("img",{draggable:"false",onLoad:function(){return a(!0)},src:t.cover?"https://images.igdb.com/igdb/image/upload/t_cover_big/".concat(t.cover.image_id,".jpg"):m,alt:t.slug}),(0,x.jsx)(f,{children:t.name}),t.rank&&(0,x.jsx)(h,{children:(0,x.jsx)("h1",{children:t.rank})})]})})})}},2482:function(e,t,n){var s=n(2744),r=n(7192),a=n(1912),i=n(9230),l=n(9085),o=n(184),c=s.Z.confirm;t.Z=function(e){var t=e.listId,n=e.navigate,s=(0,i.$G)().t;return(0,o.jsxs)("button",{style:{color:"white",fontWeight:700},className:" text-white p-2 mx-2 border-none hover:cursor-pointer flex-1 btn-delete-list",onClick:function(){c({title:"".concat(s("are_you_sure_to_delete_this_list")," ?"),content:(0,o.jsxs)("p",{style:{fontFamily:"Inter"},children:[s("this_action_is")," ",(0,o.jsxs)("span",{style:{color:r.Z.danger,fontWeight:500},children:[" ",s("irreversible"),"."," "]})]}),okText:s("yes"),okType:"danger",okButtonProps:{style:{background:r.Z.danger,borderColor:r.Z.danger,color:"white"}},cancelText:s("no"),onOk:function(){a.Z.delete("".concat("http://141-95-162-17.nip.io:8000","/api/lists/").concat(t),{withCredentials:!0}).then((function(e){l.Am.success(s("list_deleted_with_success"),{position:l.Am.POSITION.BOTTOM_RIGHT,theme:"dark",autoClose:1500}),n("/lists")})).catch((function(e){console.log(e),l.Am.error(e.message,{position:l.Am.POSITION.BOTTOM_RIGHT,theme:"dark"})}))}})},type:"dashed",children:[s("delete").toUpperCase()," "]})}},6451:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var s=n(9439),r=n(168),a=n(2791),i=n(2360),l=n(7689),o=n(1087),c=n(1912),d=n(5443),x=n(9230),m=n(1793),u=n(7192),f=n(9133),h=n(4824),p=n(1413),g=n(7295),w=n(3080),j=n(5303),v=(n(8631),n(184));function b(e){var t=e.setList,n=e.isRanked,r=e.setProgress,i=(0,a.useState)(n?"rank":"dateAdded"),l=(0,s.Z)(i,2),o=l[0],c=l[1],d=(0,a.useState)("Date added"),m=(0,s.Z)(d,2),u=m[0],f=m[1],h=(0,a.useState)("desc"),b=(0,s.Z)(h,2),k=b[0],y=b[1],N=(0,x.$G)().t,Z=n?[{key:"rank",label:N("sort_rank")},{key:"name",label:N("name")},{key:"dateAdded",label:N("date_added")},{key:"releaseDate",label:N("release_date")},{key:"rating",label:N("rating")}]:[{key:"name",label:N("name")},{key:"dateAdded",label:N("date_added")},{key:"releaseDate",label:N("release_date")},{key:"rating",label:N("rating")}];(0,a.useEffect)((function(){"name"===o?(t((function(e){return(0,p.Z)((0,p.Z)({},e),{},{games:_(e.games,k)})})),f(N("name"))):"releaseDate"===o?(t((function(e){return(0,p.Z)((0,p.Z)({},e),{},{games:C(e.games,k)})})),f(N("release_date"))):"dateAdded"===o?(t((function(e){return(0,p.Z)((0,p.Z)({},e),{},{games:D(e.games,k)})})),f(N("date_added"))):"rating"===o?(t((function(e){return(0,p.Z)((0,p.Z)({},e),{},{games:O(e.games,k)})})),f(N("rating"))):"rank"===o&&(t((function(e){return(0,p.Z)((0,p.Z)({},e),{},{games:F(e.games,k)})})),f(N("sort_rank"))),r(100)}),[o,k,t]);var _=function(e,t){return"desc"===t?e.sort((function(e,t){return e.name.localeCompare(t.name)})):e.sort((function(e,t){return t.name.localeCompare(e.name)}))},C=function(e,t){return"desc"===t?e.sort((function(e,t){return e.first_release_date-t.first_release_date})):e.sort((function(e,t){return t.first_release_date-e.first_release_date}))},D=function(e,t){return"desc"===t?e.sort((function(e,t){return new Date(e.addedAt)-new Date(t.addedAt)})):e.sort((function(e,t){return new Date(t.addedAt)-new Date(e.addedAt)}))},F=function(e,t){return"desc"===t?e.sort((function(e,t){return e.rank-t.rank})):e.sort((function(e,t){return t.rank-e.rank}))},O=function(e,t){var n=function(e){return e.rating&&e.aggregated_rating?(e.rating+e.aggregated_rating)/2:e.rating?e.rating:e.aggregated_rating?e.aggregated_rating:-1/0};return"asc"===t?e.sort((function(e,t){return n(e)-n(t)})):e.sort((function(e,t){return n(t)-n(e)}))},T=function(e){r(20),y(e)};return(0,v.jsxs)("div",{className:"flex flex-row",children:[(0,v.jsx)(w.Z,{menu:{items:Z,onClick:function(e){var t=e.key;r(20),function(e){c(e)}(t)}},onClick:function(e){var t=e.key;return console.log(t)},children:(0,v.jsx)("h2",{className:"text-white font-normal hover:text-yellow-500  cursor-pointer",children:(0,v.jsxs)(j.Z,{children:[u,(0,v.jsx)(g.Z,{})]})})}),(0,v.jsxs)("div",{className:"arrow-wrapper",children:[(0,v.jsxs)("div",{className:"arrow",onClick:function(){return T("asc")},children:[(0,v.jsx)("div",{className:"arrow-head",style:{borderBottom:"4px solid ".concat("asc"===k?"#FCD500":"white")}}),(0,v.jsx)("div",{className:"arrow-body",style:{backgroundColor:" ".concat("asc"===k?"#FCD500":"white")}})]}),(0,v.jsxs)("div",{className:"arrow",onClick:function(){return T("desc")},children:[(0,v.jsx)("div",{className:"arrow-body",style:{backgroundColor:" ".concat("desc"===k?"#FCD500":"white")}})," ",(0,v.jsx)("div",{className:"down-arrow-head",style:{borderTop:"4px solid ".concat("desc"===k?"#FCD500":"white")},children:" "})]})]})]})}var k=n(2482),y=n(3433),N=n(9085),Z=n(2744);function _(e){var t=e.likers,n=e.isModalOpen,s=e.setIsModalOpen;return(0,v.jsx)(Z.Z,{title:"Users who liked",open:n,onOk:function(){s(!1)},onCancel:function(){s(!1)},children:(0,v.jsx)("div",{className:"w-full flex flex-col overflow-y-auto h-72",children:t.map((function(e){return(0,v.jsxs)(o.rU,{className:"w-full p-4 border-solid border-gray-700 rounded-lg",to:"/user/".concat(e._id),children:[e.username," "]},e._id)}))})})}function C(e){var t=e.list,n=e.setList,r=e.setProgress,i=e.currentUser;console.log(t);var o=(0,a.useState)(t.likes.some((function(e){return!!i&&e.idUser===i._id}))),d=(0,s.Z)(o,2),x=d[0],m=d[1],f=(0,a.useState)(!1),h=(0,s.Z)(f,2),g=h[0],w=h[1],j=(0,l.s0)(),b={method:x?"delete":"post",url:"".concat("http://141-95-162-17.nip.io:8000","/api/lists/like/").concat(t._id),withCredentials:!0,headers:{"Content-Type":"application/json"}};return(0,a.useEffect)((function(){console.log(x)}),[x]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"flex justify-center items-center w-fit flex-col gap-1 ",children:[(0,v.jsxs)("div",{className:"flex flex-col gap-1 justify-center items-center",children:[(0,v.jsx)("button",{className:"like-button ".concat(x?"liked":"not-liked-button"),onClick:function(e){if(i){e.preventDefault(),r(10);var t=x;m((function(e){return!e})),(0,c.Z)(b).then((function(e){console.log(e),n(t?function(e){return(0,p.Z)((0,p.Z)({},e),{},{likes:e.likes.filter((function(e){return e.idUser!==i._id})),likers:e.likers.filter((function(e){return e._id!==i._id})),likesCount:e.likesCount-1})}:function(e){return(0,p.Z)((0,p.Z)({},e),{},{likes:[].concat((0,y.Z)(e.likes),[{idUser:i._id,_id:i._id}]),likers:[].concat((0,y.Z)(e.likers),[i]),likesCount:e.likesCount+1})})})).catch((function(e){console.log(e),N.Am.error(e.message,{position:N.Am.POSITION.BOTTOM_RIGHT,theme:"dark"})})).finally((function(){return r(100)}))}else j("/login")},children:(0,v.jsxs)("div",{className:"like-wrapper",children:[(0,v.jsx)("div",{className:"ripple"}),(0,v.jsx)("svg",{className:"heart",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{d:"M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"})}),(0,v.jsxs)("div",{className:"particles",style:{"--total-particles":6},children:[(0,v.jsx)("div",{className:"particle",style:{"--i":1,"--color":"#7642F0"}}),(0,v.jsx)("div",{className:"particle",style:{"--i":2,"--color":"#AFD27F"}}),(0,v.jsx)("div",{className:"particle",style:{"--i":3,"--color":"#DE8F4F"}}),(0,v.jsx)("div",{className:"particle",style:{"--i":4,"--color":"#D0516B"}}),(0,v.jsx)("div",{className:"particle",style:{"--i":5,"--color":"#5686F2"}}),(0,v.jsx)("div",{className:"particle",style:{"--i":6,"--color":"#D53EF3"}})]})]})}),(0,v.jsxs)("h5",{className:"text-sm font-normal cursor-pointer",onClick:function(){return w(!0)},children:[" ",(0,v.jsx)("span",{style:{color:u.Z.primary},children:t.likesCount?t.likesCount:0})," "]})]}),(0,v.jsxs)("div",{className:"flex flex-col gap-1 justify-center items-center",children:[(0,v.jsx)("button",{className:"comments-button",href:"#"}),(0,v.jsxs)("h5",{className:"text-sm font-normal",children:[" ",(0,v.jsx)("span",{style:{color:u.Z.primary},children:"0"})]})]})]}),(0,v.jsx)(_,{isModalOpen:g,setIsModalOpen:w,likers:t.likers?t.likers:[]})]})}var D,F=n(4882),O=n(4766),T=i.ZP.div(D||(D=(0,r.Z)(["\n  min-height: 100vh;\n  padding-bottom: 20px;\n  @media (min-width: 700px) {\n    padding: 20px;\n  }\n  padding-top: 80px !important;\n"])));function U(e){var t=(0,x.$G)(),n=t.t,r=t.i18n,i=(0,l.UO)().listId,p=(0,a.useState)(null),g=(0,s.Z)(p,2),w=g[0],j=g[1],y=(0,a.useState)(!0),N=(0,s.Z)(y,2),Z=N[0],_=N[1],D=(0,a.useState)(null),U=(0,s.Z)(D,2),I=U[0],A=U[1],P=(0,a.useState)(0),S=(0,s.Z)(P,2),L=S[0],M=S[1],B=(0,a.useContext)(m.V).loginData,E=(0,l.s0)();return(0,a.useEffect)((function(){M(20),c.Z.get("".concat("http://141-95-162-17.nip.io:8000","/api/lists/").concat(i)).then((function(e){j(e.data),_(!1),document.title=e.data.name+" - MyPlayLog"})).catch((function(e){A(e),console.log(e),_(!1)})).finally((function(){return M(100)}))}),[i]),Z?(0,v.jsxs)(T,{className:"flex w-full justify-center items-center",children:[(0,v.jsx)(d.Z,{color:u.Z.primary,progress:L,onLoaderFinished:function(){return M(0)}}),(0,v.jsx)(h.a,{})]}):(I&&E("/error"),console.log(B),(0,v.jsxs)(T,{children:[(0,v.jsx)(d.Z,{color:u.Z.primary,progress:L,onLoaderFinished:function(){return M(0)}}),w?(0,v.jsxs)("div",{className:"flex flex-col",children:[(0,v.jsxs)("div",{className:" flex flex-row p-2  flex-wrap text-start my-35 w-full items-end",children:[(0,v.jsxs)("h1",{className:"text-3xl",children:[w.name,(0,v.jsxs)("span",{className:"text text-sm font-light ",children:["(",w.ranked?n("top"):n("classic").toUpperCase(),")"]})]}),B&&B._id===w.idOwner&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.rU,{to:"/list/".concat(i,"/edit"),className:"p-2 ml-2 px-2 bg-[#FCD500] mt-2 hover:text-[#110f32] btn-save-list hover:bg-[#FCD800] text-[#110f32] border-none cursor-pointer max-w-fit",children:n("edit").toUpperCase()}),(0,v.jsx)("div",{className:"max-w-fit max-h-fit",children:(0,v.jsx)(k.Z,{listId:i,navigate:E})})]})]}),(0,v.jsx)("div",{className:"w-full text-start px-2 ",children:(0,v.jsx)("p",{className:"  text-base  flex-wrap text-ellipsis break-words whitespace-pre-line",children:w.description})}),(0,v.jsx)("div",{className:"w-full  px-2 flex flex-row gap-2 mt-2 items-end",children:w.tags.length>0&&(0,v.jsx)(v.Fragment,{children:w.tags.map((function(e){return(0,v.jsx)(o.rU,{to:"/lists?q=".concat(e.tag),className:"rounded-xl border text-xs border-solid border-white text-white hover:bg-white hover:text-[#110f32] p-1 px-2 hover:",children:e.tag},e.tag)}))})}),(0,v.jsxs)("div",{className:"flex flex-col  flex-wrap gap-4  items-center md:items-start  md:flex-row ",children:[(0,v.jsx)("div",{className:"flex flex-wrap flex-row  w-full flex-1 ",children:(0,v.jsxs)("div",{className:"flex flex-col w-full flex-1 items-end",children:[(0,v.jsx)(b,{games:w.games,setList:j,isRanked:w.ranked,setProgress:M}),(0,v.jsxs)("div",{className:"flex flex-wrap flex-row  md:p-4 rounded-xl w-full flex-1 justify-center xl:justify-start  ",style:{backgroundColor:u.Z.backgroundDerivation,boxShadow:"inset 0 3px 15px 3px #0009"},children:[" ",w.ranked?w.games.map((function(e){return(0,v.jsx)("div",{children:(0,v.jsx)(f.Z,{game:e})},e.id)})):w.games.map((function(e){return(0,v.jsx)("div",{children:(0,v.jsx)(O.Z,{game:e})},e.id)}))]})]})}),(0,v.jsxs)("div",{className:"flex flex-col items-center  w-32  mr-8 sticky top-20 h-fit  overflow-y-auto",children:[(0,v.jsx)(o.rU,{to:"/user/".concat(w.owner?w.owner._id:""),children:(0,v.jsx)("img",{alt:"profilePicture",className:" w-20 h-20 rounded-full",src:w.owner?w.owner.profilePic:""})}),(0,v.jsx)("h4",{className:"text ",children:n("list_from")}),(0,v.jsx)(o.rU,{to:"/user/".concat(w.owner?w.owner._id:""),className:"text-white hover:text-[#fcd500]",children:(0,v.jsx)("h2",{className:" ".concat(w.owner.username.length>15?"text-sm":w.owner.username.length>10?"text-base":"","   w-32  text-center text-ellipsis  overflow-hidden whitespace-nowrap"),children:w.owner.username})}),(0,v.jsx)("button",{className:"p-2 px-4 rounded-xl border-3 bg-transparent hover:cursor-pointer w-full hover:bg-[#fdc500]  text-[#fdc500] hover:text-white",style:{borderColor:u.Z.primary,textShadow:"1px 1px 2px black"},children:(0,v.jsx)("span",{className:" font-bold",children:n("follow")})}),(0,v.jsxs)("h3",{className:"mt-2",children:[(0,v.jsxs)("span",{style:{color:u.Z.primary},children:[w.games.length," "]}),n("games"),"."]}),(0,v.jsx)("span",{className:"w-2/3  border-1 mt-2"}),(0,v.jsx)(C,{list:w,setList:j,currentUser:B,setProgress:M}),(0,v.jsx)("span",{className:"w-2/3 border border-solid border-1 mt-3 mb-2 "}),(0,v.jsxs)("h4",{className:"text text-sm font-light ",children:[n("created")," :"]}),(0,v.jsx)("h4",{className:"text text-sm font-normal ",children:new Intl.DateTimeFormat(r.language,{year:"numeric",month:"short",day:"numeric"}).format(new Date(w.createdAt))}),(0,v.jsx)("span",{className:"w-2/3 border border-solid border-1 my-2 "}),w.lastUpdate&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("h4",{className:"text text-sm font-light ",children:[n("last_update_list")," :"]}),(0,v.jsx)("h4",{className:"text text-sm font-normal ",children:new Intl.DateTimeFormat(r.language,{year:"numeric",month:"short",day:"numeric"}).format(new Date(w.lastUpdate))})]}),(0,v.jsx)("span",{className:"w-2/3 border border-solid border-1 my-2 "}),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("h4",{className:"text text-sm font-light ",children:n("list_viewed",{view:w.views})})})]})]})]}):(0,v.jsx)(F.Z,{})]}))}},7295:function(e,t,n){n.d(t,{Z:function(){return o}});var s=n(1413),r=n(2791),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},i=n(4291),l=function(e,t){return r.createElement(i.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:t,icon:a}))};l.displayName="DownOutlined";var o=r.forwardRef(l)},8631:function(){}}]);
//# sourceMappingURL=494.9dd3131c.chunk.js.map